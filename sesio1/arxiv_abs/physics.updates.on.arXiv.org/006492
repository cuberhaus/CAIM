In the study of the evolution of cooperation, many mechanisms have been proposed to help overcome
the self-interested cheating that is individually optimal in the Prisoners' Dilemma game. These
mechanisms include assortative or networked social interactions, other-regarding preferences
considering the payoffs of others, reciprocity rules to establish cooperation as a social norm,
and multilevel selection involving simultaneous competition between individuals favoring cheaters
and competition between groups favoring cooperators. In this paper, we build on recent work studying
PDE replicator equations for multilevel selection to understand how within-group mechanisms
of assortment, other-regarding preferences, and both direct and indirect reciprocity can help
to facilitate cooperation in concert with evolutionary competition between groups. We consider
a group-structured population in which interactions between individuals consist of Prisoners'
Dilemma games, and study the dynamics of multilevel competition determined by the payoffs individuals
receive when interacting according to these within-group mechanisms. We find that the presence
of each of these mechanisms acts synergistically with multilevel selection for the promotion of
cooperation, decreasing the strength of between-group competition required to sustain long-time
cooperation and increasing the collective payoff achieved by the population. However, we find
that only other-regarding preferences allows for the achievement of socially optimal collective
payoffs for Prisoners' Dilemma games in which average payoff is maximized by an intermediate mix
of cooperators and defectors. For the other three mechanisms, the multilevel dynamics remain susceptible
to a shadow of lower-level selection, as the collective outcome fails to exceed the payoff of the
all-cooperator group. 