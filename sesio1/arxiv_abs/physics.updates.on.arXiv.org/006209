The adoption of 3D packaging technology necessitates the development of new approaches to failure
electronic device analysis. To that end, our team is developing a tool called the quantum diamond
microscope (QDM) that leverages an ensemble of nitrogen vacancy (NV) centers in diamond, achieving
vector magnetic imaging with a wide field-of-view and high spatial resolution under ambient conditions.
Here, we present the QDM measurement of 2D current distributions in an 8-nm flip chip IC and 3D current
distributions in a multi-layer PCB. Magnetic field emanations from the C4 bumps in the flip chip
dominate the QDM measurements, but these prove to be useful for image registration and can be subtracted
to resolve adjacent current traces in the die at the micron scale. Vias in 3D ICs display only Bx and
By magnetic fields due to their vertical orientation and are difficult to detect with magnetometers
that only measure the Bz component (orthogonal to the IC surface). Using the multi-layer PCB, we
show that the QDM's ability to simultaneously measure Bx, By, and Bz is advantageous for resolving
magnetic fields from vias as current passes between layers. We also show how spacing between conducting
layers is determined by magnetic field images and how it agrees with the design specifications of
the PCB. In our initial efforts to provide further z-depth information for current sources in complex
3D circuits, we show how magnetic field images of individual layers can be subtracted from the magnetic
field image of the total structure. This allows for isolation of signal layers and can be used to map
embedded current paths via solution of the 2D magnetic inverse. In addition, the paper also discusses
the use of neural networks to identify 2D current distributions and its potential for analyzing
3D structures. 