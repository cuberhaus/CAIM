Plasmonics is a rapid growing field, which has enabled both fundamental science and inventions
of various quantum optoelectronic devices. An accurate and efficient method to calculate the optical
response of metallic structures with feature size in the nanoscale plays an important role. Quantum
hydrodynamic theory (QHT) provides an efficient description of the free-electron gas, where quantum
effects of nonlocality and spill-out are taken into account. In this work, we introduce a general
QHT that includes diffusion to account for the broadening, which is a key problem in practical applications
of surface plasmon. We will introduce a density-dependent diffusion coefficient to give very accurate
linewidth. It is a self-consistent method, in which both the ground and excited states are solved
by using the same energy functional, with the kinetic energy described by the Thomas-Fermi and von
Weizs\"{a}cker (vW) formalisms. In addition, our QHT method is stable by introduction of an electron
density-dependent damping rate. For sodium nanosphere of various sizes, the plasmon energy and
broadening by our QHT method are in excellent agreement with those by density functional theory
and Kreibig formula. By applying our QHT method to sodium jellium nanorods, we clearly show that
our method enables a parameter-free simulation, i.e. without resorting to any empirical parameter,
such as size-dependent damping rate and diffusing coefficient. It is found that there exists a perfect
linear relation between the resonance wavelength and aspect radio. The width decreases with increasing
aspect ratio and height. The calculations show that our QHT method provides an explicit and unified
way to account for size-dependent frequency shifts and broadening of arbitrarily shaped geometries.
It is reliable and robust with great predicability, and hence provides a general and efficient platform
to study plasmonics. 