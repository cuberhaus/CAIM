The mechanisms underlying the enhancement of magnetic anisotropies (MAs) of Sm ions, owing to valence
electrons at the Sm site and the screened nuclear charges of ligands, are clarified using a detailed
analysis of crystal fields (CF). In order to investigate the finite-temperature magnetic properties,
we developed an effective spin model for SmFe$_{12}X$ ($X$=H, B, C, and N) and SmFe$_{11}M$ ($M$=Ti,
V, and Co), where the magnetic moments, CF parameters, and exchange fields were determined by first-principle
calculations. Using this model, the MA constants and magnetization curves at finite temperatures
were investigated using a recently introduced analytical method [T. Yoshioka, H. Tsuchiura, and
P. Nov\'ak, Phys. Rev. B {\bf 102}, 184410 (2020)]. In SmFe$_{12}X$, the doped light elements $X$
are assumed to be at the $2b$ site, and in SmFe$_{11}M$, the substitution site of Fe is systematically
investigated for all inequivalent $8f$, $8i$, and $8j$ sites. We found that the first-order MA constant
$K_1$ is increased by a factor of about two when hydrogen is doped to the $2b$ site and when Fe is replaced
by Ti or V at the $8j$ site, owing to the attraction of the prolate $4f$ electron cloud to the screened
positive charges of the surrounding ligand ions. We found that when Fe is replaced by Co, the MA increases
at all temperatures regardless of the substitution site. The substituted Co attracts electrons,
which reduces the electron density in the region from the Sm site to the empty $2b$ site. This causes
the $4f$ electron cloud at the Sm site to be fixed along the $c$-axis direction, which improves the
MA. The calculated temperature dependence of $K_1(T)$ and $K_2(T)$ in SmFe$_{11}$Co qualitatively
reproduces the experimental results in the case of Sm(Co$_x$Fe$_{1-x}$)$_{12}$ for $x$=0.1 and
0.07. 