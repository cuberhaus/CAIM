Recent results of ground-based telescopes, giving high-quality measurements of the CMB temperature
power spectrum on small scales motivate the need for an accurate model of foregrounds, which dominate
the primary signal at these multipoles. In a previous work, we have shown that cosmological information
could be retrieved from the power spectrum of the thermal Sunyaev Zel'dovich (SZ) effect. In this
work, we introduce a physically-motivated model of the Epoch of Reionisation (EoR) in the cosmological
analysis of CMB data, coherent on all scales. In particular, at high multipoles, the power spectrum
of the kinetic SZ (kSZ) effect is inferred from a set of cosmological parameters by a machine-learning
algorithm. First including an asymmetric parameterisation of the EoR history in the Planck 2018
data analysis, we retrieve a value of the CMB optical depth consistent with previous results but
giving a completely different history of the high-redshift Universe, in which the first luminous
sources light up as early as $z=15$. Considering the latest small-scale data from the South Pole
Telescope (SPT) and letting the cosmology free to vary, we find that including the new cosmology-dependent
tSZ and kSZ spectra help tighten the constraints on the amplitudes of these two spectra by breaking
the degeneracy between their amplitudes. We report a $5\sigma$ measurement of the kSZ signal at
$\ell=3000$ ($\mathcal{D}_{3000}^\mathrm{kSZ} = 3.3 \pm 0.7~\mu\mathrm{K}^2$, $1\sigma$),
marginalised over cosmology, as well as an upper limit on the patchy signal $\mathcal{D}_{3000}^\mathrm{pkSZ}<1.58~\mu\mathrm{K}^2$
(95\% C.L.). Additionally, we find that the SPT data favours slightly earlier reionisation scenarios
than Planck, leading to $\tau = 0.062 \pm 0.012$ and a reionisation midpoint $z_{\rm re} = 7.9\pm1.1$
($1\sigma$), in line with constraints from high-redshift quasars and galaxies. 