High-resolution Doppler-resolved spectroscopy has presented new opportunities for studying
the atmospheres of exoplanets. While the 'classical' cross-correlation approach has proven to
be efficient at finding atmospheric species, it is unable to perform direct atmospheric retrievals.
Recent work has shown that retrievals are possible using a direct likelihood evaluation or likelihood
'mappings'. The unique aspect of high-resolution retrievals is that the data-processing methods
required to remove the stellar and telluric lines also distort the underlying exoplanet's signal
and therefore the forward model must be pre-processed to match this filtering. This was the key remaining
limitation in our previously published framework. This paper directly addresses this by introducing
a simple and fast model-filtering technique that can replicate the processing performed by algorithms
such as SysRem and PCA. This enables retrievals to be performed without having to perform expensive
injection and pre-processing steps for every model. We show that we can reliably constrain quantitative
measures of the atmosphere from transmission spectra including the temperature-pressure profile,
relative abundances, planetary velocities and rotational broadening parameters. Finally, we
demonstrate our framework using UVES transmission spectroscopy of WASP-121b. We constrain the
temperature-pressure profile and relative abundances of Fe, Cr, and V to be $\log_{10}(\chi_{\rm
Fe}/\chi_{\rm Cr})$=1.66$\pm$0.28, $\log_{10}(\chi_{\rm Fe}/\chi_{\rm V})$=3.78$\pm$0.29
and $\log_{10}(\chi_{\rm Fe}/\chi_{\rm Mg})$=-1.26$\pm$0.60. The relative abundances are
consistent with solar values, with the exception of Fe/Mg, where the large Mg abundance is probably
explained by the escaping atmosphere of WASP-121b that is not accounted for in our atmospheric model.
